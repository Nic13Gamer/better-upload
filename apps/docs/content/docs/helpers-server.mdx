---
title: Helpers
description: A collection of helper functions and utilities for your project.
icon: Wrench
---

<PageSelect
  pages={[
    {
      href: '/docs/helpers-server',
      title: 'Server-side',
      description: 'Helpers for your router and server.',
    },
    {
      href: '/docs/helpers-client',
      title: 'Client-side',
      description: 'Helpers for your frontend.',
    },
  ]}
/>

## S3 Clients

Better Upload has built-in clients for popular S3-compatible storage services, like AWS S3 and Cloudflare R2. Suggest a new client by [opening an issue](https://github.com/Nic13Gamer/better-upload/issues).

<include cwd>./components/mdx/helpers-server.mdx#s3-clients</include>

<Callout>
  You can omit the parameters and let the client get your credentials from
  environment variables.
</Callout>

## Objects

Helpers for working with objects in S3-compatible storage services. Suggest new helpers by [opening an issue](https://github.com/Nic13Gamer/better-upload/issues).

### Presign get object

Generate a pre-signed URL to download an object. Commonly used for client-side downloads.

```ts
import { presignGetObject } from '@better-upload/server/helpers';

const url = await presignGetObject(s3, {
  bucket: 'my-bucket',
  key: 'example.png',
  expiresIn: 3600, // 1 hour
});
```

### Get object

Get an object (including its content) from an S3 bucket.

```ts
import { getObject, getObjectStream } from '@better-upload/server/helpers';

// as a Blob
const object = await getObject(s3, {
  bucket: 'my-bucket',
  key: 'example.png',
});

// as a ReadableStream
const objectStream = await getObjectStream(s3, {
  bucket: 'my-bucket',
  key: 'example.png',
});
```

### Head object

Get metadata about an object without fetching its content.

```ts
import { headObject } from '@better-upload/server/helpers';

const object = await headObject(s3, {
  bucket: 'my-bucket',
  key: 'example.png',
});
```

### Move object (rename)

Move an object from one key to another, within or between, S3 buckets. Also known as renaming.

```ts
import { moveObject } from '@better-upload/server/helpers';

await moveObject(s3, {
  source: {
    bucket: 'source-bucket',
    key: 'example.png',
  },
  destination: {
    bucket: 'destination-bucket',
    key: 'copy.png',
  },
});
```

<Callout type="warn">
  This copies the object to the new location and then deletes the original
  object. It can be slow.
</Callout>

### Copy object

Copy an object, within or between, S3 buckets.

```ts
import { copyObject } from '@better-upload/server/helpers';

await copyObject(s3, {
  source: {
    bucket: 'source-bucket',
    key: 'example.png',
  },
  destination: {
    bucket: 'destination-bucket',
    key: 'images/example.png',
  },
});
```

### Put object

Upload an object to an S3 bucket.

```ts
import { putObject } from '@better-upload/server/helpers';

await putObject(s3, {
  bucket: 'my-bucket',
  key: 'example.txt',
  body: 'Hello, world!',
  contentType: 'text/plain',
});
```

<Callout>
  Do not use this helper for large files or for client-side uploads (use the
  standard router instead).
</Callout>

### Delete object

Delete an object from an S3 bucket.

```ts
import { deleteObject } from '@better-upload/server/helpers';

await deleteObject(s3, {
  bucket: 'my-bucket',
  key: 'example.png',
});
```

### Delete objects

Delete multiple objects from an S3 bucket in a single request.

```ts
import { deleteObjects } from '@better-upload/server/helpers';

const { deleted, errors } = await deleteObjects(s3, {
  bucket: 'my-bucket',
  objects: [{ key: 'file1.png' }, { key: 'file2.png' }],
});
```

### Multipart uploads

Helpers for working with multipart uploads in S3-compatible storage services.

#### Create multipart upload

Create a new multipart upload in an S3 bucket.

```ts
import { createMultipartUpload } from '@better-upload/server/helpers';

const { uploadId } = await createMultipartUpload(s3, {
  bucket: 'my-bucket',
  key: 'large-file.zip',
  contentType: 'application/zip',
});
```

#### Upload part

Upload a part of a multipart upload.

```ts
import { uploadPart } from '@better-upload/server/helpers';

const { eTag } = await uploadPart(s3, {
  bucket: 'my-bucket',
  key: 'large-file.zip',
  uploadId: '...',
  partNumber: 1,
  body: partData,
});
```

#### Complete multipart upload

Complete a multipart upload in an S3 bucket.

```ts
import { completeMultipartUpload } from '@better-upload/server/helpers';

await completeMultipartUpload(s3, {
  bucket: 'my-bucket',
  key: 'large-file.zip',
  uploadId: '...',
  parts: [
    { partNumber: 1, eTag: '...' },
    { partNumber: 2, eTag: '...' },
    // ...
  ],
});
```

#### Abort multipart upload

Abort a multipart upload in an S3 bucket.

```ts
import { abortMultipartUpload } from '@better-upload/server/helpers';

await abortMultipartUpload(s3, {
  bucket: 'my-bucket',
  key: 'large-file.zip',
  uploadId: '...',
});
```
