---
title: Client Hooks
---

Better Upload provides React hooks that allow you to easily upload files using pre-signed URLs.

## Single file

To upload single files, use the `useUploadFile` hook.

```tsx
import { useUploadFile } from 'better-upload/client';

export function MyComponent() {
  const { upload, reset, uploadedFile, isPending, isSuccess, isError, error } =
    useUploadFile({
      route: 'demo',
    });

  return (
    <input
      type="file"
      onChange={(e) => {
        if (e.target.files?.[0]) {
          upload(e.target.files[0]);
        }
      }}
    />
  );
}
```

## Multiple files

To upload multiple files at once, use the `useUploadFiles` hook.

```tsx
import { useUploadFiles } from 'better-upload/client';

export function MyComponent() {
  const { upload, reset, uploadedFiles, isPending, isSuccess, isError, error } =
    useUploadFiles({
      route: 'demo',
    });

  return (
    <input
      type="file"
      multiple
      onChange={(e) => {
        if (e.target.files) {
          upload(e.target.files);
        }
      }}
    />
  );
}
```

### Sequential upload

With multiple files, you can also upload sequentially, rather than in parallel. This can be useful to reduce the load on the client and S3 server, however, it will take longer to upload all files.

```tsx
useUploadFiles({
  route: 'demo',
  sequential: true,
});
```

## Events

### On upload begin

Event that is called when the file starts being uploaded to the S3 bucket. Happens after your server responds with a pre-signed URL.

<Tabs groupId="multipleFiles" items={['Single file', 'Multiple files']}>

<Tab value="Single file">
```tsx
useUploadFile({
  route: 'demo',
  onUploadBegin: ({ file, metadata }) => {
    console.log('Upload begin');
  },
});
```
</Tab>
<Tab value="Multiple files">
```tsx
useUploadFiles({
  route: 'demo',
  onUploadBegin: ({ files, metadata }) => {
    console.log('Upload begin');
  },
});
```
</Tab>

</Tabs>

### On upload progress

Event that is called when the file upload progress changes.

<Tabs groupId="multipleFiles" items={['Single file', 'Multiple files']}>

<Tab value="Single file">
```tsx
useUploadFile({
  route: 'demo',
  onUploadProgress: ({ file, progress }) => {
    console.log(`Upload progress: ${progress * 100}%`);
  },
});
```
</Tab>
<Tab value="Multiple files">
```tsx
useUploadFiles({
  route: 'demo',
  onUploadProgress: ({ file, progress }) => {
    console.log(`${file.name} upload progress: ${progress * 100}%`);
  },
});
```
</Tab>

</Tabs>

### On upload complete

Event that is called after the file has been successfully uploaded.

<Tabs groupId="multipleFiles" items={['Single file', 'Multiple files']}>

<Tab value="Single file">
```tsx
useUploadFile({
  route: 'demo',
  onUploadComplete: ({ file, metadata }) => {
    console.log('File uploaded');
  },
});
```
</Tab>
<Tab value="Multiple files">
```tsx
useUploadFiles({
  route: 'demo',
  onUploadComplete: ({ files, metadata }) => {
    console.log(`${files.length} files uploaded`);
  },
});
```
</Tab>

</Tabs>

### On upload error

Event that is called if the upload fails.

<Tabs groupId="multipleFiles" items={['Single file', 'Multiple files']}>

<Tab value="Single file">
```tsx
useUploadFile({
  route: 'demo',
  onUploadError: (error) => {
    console.log(error.message);
  },
});
```
</Tab>
<Tab value="Multiple files">
```tsx
useUploadFiles({
  route: 'demo',
  onUploadError: (error) => {
    console.log(error.message);
  },
});
```
</Tab>

</Tabs>

### On upload settled

Event that is called when the file upload has settled, regardless of success or failure.

<Tabs groupId="multipleFiles" items={['Single file', 'Multiple files']}>

<Tab value="Single file">
```tsx
useUploadFile({
  route: 'demo',
  onUploadSettled: () => {
    console.log('Upload settled');
  },
});
```
</Tab>
<Tab value="Multiple files">
```tsx
useUploadFiles({
  route: 'demo',
  onUploadSettled: () => {
    console.log('Upload settled');
  },
});
```
</Tab>

</Tabs>
