{"name":"upload-progress","title":"Upload Progress","type":"registry:ui","dependencies":["@better-upload/client","lucide-react"],"registryDependencies":["progress"],"files":[{"path":"ui/upload-progress.tsx","type":"registry:ui","content":"import { Progress } from '@/components/ui/progress';\r\nimport { cn } from '@/lib/utils';\r\nimport type { UploadHookControl } from '@better-upload/client';\r\nimport { formatBytes } from '@better-upload/client/helpers';\r\nimport { Dot, File } from 'lucide-react';\r\n\r\ntype UploadProgressProps = {\r\n  control: UploadHookControl<true>;\r\n\r\n  // Add any additional props you need.\r\n};\r\n\r\nexport function UploadProgress({\r\n  control: { progresses },\r\n}: UploadProgressProps) {\r\n  return (\r\n    <div className=\"grid gap-2\">\r\n      {progresses.map((progress) => (\r\n        <div\r\n          key={progress.objectInfo.key}\r\n          className={cn(\r\n            'dark:bg-input/10 flex items-center gap-2 rounded-lg border bg-transparent p-3',\r\n            {\r\n              'bg-red-500/[0.04]! border-red-500/60':\r\n                progress.status === 'failed',\r\n            }\r\n          )}\r\n        >\r\n          <FileIcon type={progress.type} />\r\n\r\n          <div className=\"grid grow gap-1\">\r\n            <div className=\"flex items-center gap-0.5\">\r\n              <p className=\"max-w-40 truncate text-sm font-medium\">\r\n                {progress.name}\r\n              </p>\r\n              <Dot className=\"text-muted-foreground size-4\" />\r\n              <p className=\"text-muted-foreground text-xs\">\r\n                {formatBytes(progress.size)}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex h-4 items-center\">\r\n              {progress.progress < 1 && progress.status !== 'failed' ? (\r\n                <Progress className=\"h-1.5\" value={progress.progress * 100} />\r\n              ) : progress.status === 'failed' ? (\r\n                <p className=\"text-xs text-red-500\">Failed</p>\r\n              ) : (\r\n                <p className=\"text-muted-foreground text-xs\">Completed</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst iconCaptions = {\r\n  'image/': 'IMG',\r\n  'video/': 'VID',\r\n  'audio/': 'AUD',\r\n  'application/pdf': 'PDF',\r\n  'application/zip': 'ZIP',\r\n  'application/x-rar-compressed': 'RAR',\r\n  'application/x-7z-compressed': '7Z',\r\n  'application/x-tar': 'TAR',\r\n  'application/json': 'JSON',\r\n  'application/javascript': 'JS',\r\n  'text/plain': 'TXT',\r\n  'text/csv': 'CSV',\r\n  'text/html': 'HTML',\r\n  'text/css': 'CSS',\r\n  'application/xml': 'XML',\r\n  'application/x-sh': 'SH',\r\n  'application/x-python-code': 'PY',\r\n  'application/x-executable': 'EXE',\r\n  'application/x-disk-image': 'ISO',\r\n};\r\n\r\nfunction FileIcon({ type }: { type: string }) {\r\n  const caption = Object.entries(iconCaptions).find(([key]) =>\r\n    type.startsWith(key)\r\n  )?.[1];\r\n\r\n  return (\r\n    <div className=\"relative shrink-0\">\r\n      <File className=\"text-muted-foreground size-12\" strokeWidth={1} />\r\n\r\n      {caption && (\r\n        <span className=\"bg-primary text-primary-foreground absolute bottom-2.5 left-0.5 select-none rounded px-1 py-px text-xs font-semibold\">\r\n          {caption}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"}]}